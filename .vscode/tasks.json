{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Alembic autogenerated revision",
            "type": "shell",
            "command": "${command:python.interpreterPath} -m alembic revision --autogenerate -m ${input:alembic_revision_msg}",
        },
        {
            "label": "Alembic upgrade to head",
            "type": "shell",
            "command": "${command:python.interpreterPath} -m alembic upgrade head",
        },
        {
            "label": "Alembic downgrade by -1",
            "type": "shell",
            "command": "${command:python.interpreterPath} -m alembic downgrade -1",
        },
        {
            "label": "Run Uvicorn Server",
            "type": "shell",
            "command": "${command:python.interpreterPath} -m uvicorn app.main:app --reload"
        },
        {
            "label": "Start pgadmin4",
            "type": "shell",
            "command": "/bin/bash -c \"source ~/pgadmin/bin/activate && pgadmin4\"",
        },
        // {
        //     "label": "Run pytest in terminal",
        //     "type": "shell",
        //     "command": "/bin/bash -c \"env $(grep -v '^#' ./.env.test | xargs) ${command:python.interpreterPath} -m pytest -s -v\"",
        // },
        // {
        //     "label": "Run specific pytest test in terminal",
        //     "type": "shell",
        //     "command": "/bin/bash -c \"env $(grep -v '^#' ./.env.test | xargs) ${command:python.interpreterPath} -m pytest -s -v -k ${input:test_name}\"",
        // },
    ],
    "inputs": [
        {
            "id": "alembic_revision_msg",
            "description": "Alembic revision message",
            "type": "promptString"
        },
        {
            "id": "test_name",
            "description": "Test name to search in pytest tests",
            "type": "promptString"
        },
    ]
}
